function MainCtrl(){var e=this;e.getNik="",e.activeButton=!1,e.nickname="",e.listener=function(n){"http://localhost:9000"==n.origin&&("nik"==n.data.type?e.getNik=n.data.nik:e.show(n.data,e.nickname,"get"))},window.addEventListener?window.addEventListener("message",e.listener):window.attachEvent("onmessage",e.listener),e.changeButton=function(){""!=e.message?e.activeButton=!0:e.activeButton=!1},e.sendNik=function(){var n=window.parent,a={type:"nik",nik:e.saveText(e.nickname)};n.postMessage(a,"http://localhost:9000")},e.changeNik=function(e,n,a){var t=new RegExp("(^|\\s)"+e+"(?=\\s|[,.?!]|$)","gi"),s=new RegExp("(^|\\s)"+n+"(?=\\s|[,.?!]|$)","gi");return""==e?a.replace(s,"<span class=nikGet>$&</span>"):a.replace(s,"<span class=nikGet>$&</span>").replace(t,"<span class=nikSend>$&</span>")},e.showSmiles=function(e){var n={":)":"smile",":'(":"cry",":(":"sad",";)":"wink",":*":"kiss"};return e.replace(/(:\))|(:\()|(:'\()|(;\))|(:\*)/g,function(e){return'<div class="smilies '+n[e]+'"></div>'})},e.saveText=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},e.show=function(n,a,t){var s=angular.element("<div>"),i=angular.element(document.querySelector("#text"));if("get"==t){s.addClass("alert get");var r=e.changeNik(n.nik,a,n.text)}else{s.addClass("alert send");var r=e.changeNik(a,n.nik,n.text)}r=e.showSmiles(r);var l=angular.element('<span class="nik">'+n.nik+": </span>"+r);s.append(l),i.append(s)},e.send=function(n){var a=window.parent;if(""!=e.message){var t={type:"message",nik:e.saveText(e.nickname),text:e.saveText(e.message)};e.show(t,n,"send"),a.postMessage(t,"http://localhost:9000"),e.message="",e.activeButton=!1}}}var app=angular.module("app",[]);app.controller("MainCtrl",MainCtrl);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImZyYW1lLmpzIl0sIm5hbWVzIjpbIk1haW5DdHJsIiwibWFpbiIsInRoaXMiLCJnZXROaWsiLCJhY3RpdmVCdXR0b24iLCJuaWNrbmFtZSIsImxpc3RlbmVyIiwiZXZlbnQiLCJvcmlnaW4iLCJkYXRhIiwidHlwZSIsIm5payIsInNob3ciLCJ3aW5kb3ciLCJhZGRFdmVudExpc3RlbmVyIiwiYXR0YWNoRXZlbnQiLCJjaGFuZ2VCdXR0b24iLCJtZXNzYWdlIiwic2VuZE5payIsIndpbiIsInBhcmVudCIsInNlbmQiLCJzYXZlVGV4dCIsInBvc3RNZXNzYWdlIiwiY2hhbmdlTmlrIiwibmlrR2V0IiwidGV4dCIsInJlZ05pa1NlbmQiLCJSZWdFeHAiLCJyZWdOaWtHZXQiLCJyZXBsYWNlIiwic2hvd1NtaWxlcyIsInNtaWxpZXMiLCI6KSIsIjonKCIsIjooIiwiOykiLCI6KiIsIm1hdGNoIiwibW9kIiwiZGl2IiwiYW5ndWxhciIsImVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRDbGFzcyIsImNvbnRlbnQiLCJhcHBlbmQiLCJhcHAiLCJtb2R1bGUiLCJjb250cm9sbGVyIl0sIm1hcHBpbmdzIjoiQUFHQSxRQUFTQSxZQUVQLEdBQUlDLEdBQU9DLElBQ1hELEdBQUtFLE9BQVMsR0FDZEYsRUFBS0csY0FBZSxFQUNwQkgsRUFBS0ksU0FBVyxHQUVoQkosRUFBS0ssU0FBVyxTQUFTQyxHQUdILHlCQUFoQkEsRUFBTUMsU0FLYSxPQUFuQkQsRUFBTUUsS0FBS0MsS0FFYlQsRUFBS0UsT0FBU0ksRUFBTUUsS0FBS0UsSUFHekJWLEVBQUtXLEtBQUtMLEVBQU1FLEtBQU1SLEVBQUtJLFNBQVUsU0FLckNRLE9BQU9DLGlCQUVURCxPQUFPQyxpQkFBaUIsVUFBV2IsRUFBS0ssVUFHeENPLE9BQU9FLFlBQVksWUFBYWQsRUFBS0ssVUFLdkNMLEVBQUtlLGFBQWUsV0FFRSxJQUFoQmYsRUFBS2dCLFFBQ1BoQixFQUFLRyxjQUFlLEVBRXBCSCxFQUFLRyxjQUFlLEdBSXhCSCxFQUFLaUIsUUFBVSxXQUViLEdBQUlDLEdBQU1OLE9BQU9PLE9BRWJDLEdBQ0ZYLEtBQUssTUFDTEMsSUFBSVYsRUFBS3FCLFNBQVNyQixFQUFLSSxVQUd6QmMsR0FBSUksWUFBWUYsRUFBTSwwQkFJeEJwQixFQUFLdUIsVUFBWSxTQUFTYixFQUFJYyxFQUFRQyxHQUVwQyxHQUFJQyxHQUFhLEdBQUlDLFFBQU8sVUFBVWpCLEVBQUksbUJBQW9CLE1BQzFEa0IsRUFBWSxHQUFJRCxRQUFPLFVBQVVILEVBQU8sbUJBQW9CLEtBRWhFLE9BQVcsSUFBUGQsRUFFS2UsRUFBS0ksUUFBUUQsRUFBVyxnQ0FHMUJILEVBQUtJLFFBQVFELEVBQVcsZ0NBQWdDQyxRQUFRSCxFQUFZLGtDQUlyRjFCLEVBQUs4QixXQUFhLFNBQVNMLEdBRXpCLEdBQUlNLElBQ0ZDLEtBQUssUUFDTEMsTUFBTSxNQUNOQyxLQUFLLE1BQ0xDLEtBQUssT0FDTEMsS0FBSyxPQUdQLE9BQU9YLEdBQUtJLFFBQVEsa0NBQW1DLFNBQVVRLEdBQy9ELE1BQU8sdUJBQXVCTixFQUFRTSxHQUFPLGNBSWpEckMsRUFBS3FCLFNBQVcsU0FBU0ksR0FFdkIsTUFBT0EsR0FBS0ksUUFBUSxLQUFNLFNBQVNBLFFBQVEsS0FBTSxRQUFRQSxRQUFRLEtBQU0sU0FJekU3QixFQUFLVyxLQUFPLFNBQVNILEVBQU1nQixFQUFRYyxHQUVqQyxHQUFJQyxHQUFNQyxRQUFRQyxRQUFRLFNBQ3RCdEIsRUFBU3FCLFFBQVFDLFFBQVFDLFNBQVNDLGNBQWMsU0FFcEQsSUFBVyxPQUFQTCxFQUFhLENBR2ZDLEVBQUlLLFNBQVMsWUFDYixJQUFJbkIsR0FBT3pCLEVBQUt1QixVQUFVZixFQUFLRSxJQUFLYyxFQUFRaEIsRUFBS2lCLFVBRzlDLENBRUhjLEVBQUlLLFNBQVMsYUFDYixJQUFJbkIsR0FBT3pCLEVBQUt1QixVQUFVQyxFQUFRaEIsRUFBS0UsSUFBS0YsRUFBS2lCLE1BR25EQSxFQUFPekIsRUFBSzhCLFdBQVdMLEVBR3ZCLElBQUlvQixHQUFVTCxRQUFRQyxRQUFRLHFCQUFxQmpDLEVBQUtFLElBQUksWUFBYWUsRUFFekVjLEdBQUlPLE9BQU9ELEdBQ1gxQixFQUFPMkIsT0FBT1AsSUFJaEJ2QyxFQUFLb0IsS0FBTyxTQUFTbEIsR0FFbkIsR0FBSWdCLEdBQU1OLE9BQU9PLE1BRWpCLElBQW9CLElBQWhCbkIsRUFBS2dCLFFBQWMsQ0FFcEIsR0FBSUksSUFDSFgsS0FBSyxVQUNMQyxJQUFJVixFQUFLcUIsU0FBU3JCLEVBQUtJLFVBQ3ZCcUIsS0FBS3pCLEVBQUtxQixTQUFTckIsRUFBS2dCLFNBRzFCaEIsR0FBS1csS0FBS1MsRUFBTWxCLEVBQVEsUUFFeEJnQixFQUFJSSxZQUFZRixFQUFNLHlCQUd0QnBCLEVBQUtnQixRQUFVLEdBQ2ZoQixFQUFLRyxjQUFlLElBN0kxQixHQUFJNEMsS0FBTVAsUUFBUVEsT0FBTyxTQUN6QkQsS0FBSUUsV0FBVyxXQUFZbEQiLCJmaWxlIjoiZnJhbWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ2FwcCcsIFtdKTtcclxuYXBwLmNvbnRyb2xsZXIoJ01haW5DdHJsJywgTWFpbkN0cmwpO1xyXG5cclxuZnVuY3Rpb24gTWFpbkN0cmwgKCkge1xyXG5cclxuICB2YXIgbWFpbiA9IHRoaXM7XHJcbiAgbWFpbi5nZXROaWsgPSAnJztcclxuICBtYWluLmFjdGl2ZUJ1dHRvbiA9IGZhbHNlO1xyXG4gIG1haW4ubmlja25hbWUgPSAnJztcclxuXHJcbiAgbWFpbi5saXN0ZW5lciA9IGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgLy/QodC+0LHRi9GC0LjQtSDQv9GA0LjRhdC+0LTQsCDRgdC+0L7QsdGJ0LXQvdC40Y8g0YEg0LPQsNC70LLQvdC+0Lkg0YHRgtGA0LDQvdC40YbRiyAgXHJcblxyXG4gICAgaWYgKGV2ZW50Lm9yaWdpbiAhPSAnaHR0cDovL2xvY2FsaG9zdDo5MDAwJykge1xyXG4gICAgICAvLyDQuNCz0L3QvtGA0LjRgNC+0LLQsNGC0Ywg0L3QtdC40LfQstC10YHRgtC90YvQuSDQtNC+0LzQtdC9XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZXZlbnQuZGF0YS50eXBlID09ICduaWsnKXtcclxuICAgICAgLy/QldGB0LvQuCDQv9GA0LjRiNC10Lsg0L3QuNC6INGB0L7RgdC10LTQsCwg0YHQvtC30LTQsNC10Lwg0L3QvtCy0L7Qs9C+INGB0LvRg9GI0LDRgtC10LvRjyDRgSDQtdCz0L4g0L3QuNC60L7QvFxyXG4gICAgICBtYWluLmdldE5payA9IGV2ZW50LmRhdGEubmlrO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgIC8v0JjQvdCw0YfQtSAtINC/0LjRgdGM0LzQvi4g0J7RgtC+0LHRgNCw0LbQsNC10Lwg0LIg0LvQuNGB0YIg0YHQvtC+0LHRidC10L3QuNC5XHJcbiAgICAgIG1haW4uc2hvdyhldmVudC5kYXRhLCBtYWluLm5pY2tuYW1lLCAnZ2V0Jyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuXHJcbiAgaWYgKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKSB7XHJcbiAgLy/QodC70YPRiNCw0YLQtdC70Ywg0L/RgNC40YXQvtC00LAg0YHQvtC+0LHRidC10L3QuNGPINGBINCz0LvQsNCy0L3QvtC5INGB0YLRgNCw0L3QuNGG0YtcclxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLCBtYWluLmxpc3RlbmVyKTtcclxuICB9IGVsc2Uge1xyXG4gICAgLy8gSUU4XHJcbiAgICB3aW5kb3cuYXR0YWNoRXZlbnQoXCJvbm1lc3NhZ2VcIiwgbWFpbi5saXN0ZW5lcik7XHJcbiAgfVxyXG5cclxuXHJcblxyXG4gIG1haW4uY2hhbmdlQnV0dG9uID0gZnVuY3Rpb24oKXtcclxuICAvL9Ch0LvRg9GI0LDQtdC8INC/0L7Qu9C1INCy0LLQvtC00LAsINGH0YLQvtCx0Ysg0LDQutGC0LjQstC40YDQvtCy0LDRgtGML9C00LXQt9Cw0LrRgtC40LLQuNGA0L7QstCw0YLRjCDQutC90L7Qv9C60YNcclxuICAgIGlmIChtYWluLm1lc3NhZ2UgIT0gJycpe1xyXG4gICAgICBtYWluLmFjdGl2ZUJ1dHRvbiA9IHRydWU7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgbWFpbi5hY3RpdmVCdXR0b24gPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG1haW4uc2VuZE5payA9IGZ1bmN0aW9uKCl7XHJcbiAgLy/QntGC0L/RgNCw0LLQutCwINGB0L7QvtCx0YnQtdC90LjRjyDRgSDQvdC40LrQvtC8INC90LAg0L7RgdC90L7QstC90YPRjiDRgdGC0YDQsNC90LjRhtGDXHJcbiAgICB2YXIgd2luID0gd2luZG93LnBhcmVudFxyXG4gICAgXHJcbiAgICB2YXIgc2VuZCA9IHtcclxuICAgICAgdHlwZTonbmlrJyxcclxuICAgICAgbmlrOm1haW4uc2F2ZVRleHQobWFpbi5uaWNrbmFtZSlcclxuICAgIH07XHJcblxyXG4gICAgd2luLnBvc3RNZXNzYWdlKHNlbmQsIFwiaHR0cDovL2xvY2FsaG9zdDo5MDAwXCIpOyBcclxuICB9XHJcblxyXG5cclxuICBtYWluLmNoYW5nZU5payA9IGZ1bmN0aW9uKG5payxuaWtHZXQsIHRleHQpe1xyXG4gIC8v0KTRg9C90LrRhtC40Y8g0L7RgtGA0LjRgdC+0LLQutC4INC90LjQutCwLCDQtdGB0LvQuCDQstGB0YLRgNC10YfQsNC10YLRgSDQsiDRgtC10LrRgdGC0LVcclxuICAgIHZhciByZWdOaWtTZW5kID0gbmV3IFJlZ0V4cCgnKF58XFxcXHMpJytuaWsrJyg/PVxcXFxzfFssLj8hXXwkKScsICdnaScpO1xyXG4gICAgdmFyIHJlZ05pa0dldCA9IG5ldyBSZWdFeHAoJyhefFxcXFxzKScrbmlrR2V0KycoPz1cXFxcc3xbLC4/IV18JCknLCAnZ2knKTtcclxuICAgIFxyXG4gICAgaWYgKG5payA9PSAnJyl7XHJcbiAgICAvL9CV0YHQu9C4INGB0L7RgdC10LQg0L3QtSDQstCy0LXQuyDQvdC40LosINGC0L4g0L3QtSDQuNGJ0LXQvCDQtdCz0L5cclxuICAgICAgcmV0dXJuIHRleHQucmVwbGFjZShyZWdOaWtHZXQsICc8c3BhbiBjbGFzcz1uaWtHZXQ+JCY8L3NwYW4+Jyk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRleHQucmVwbGFjZShyZWdOaWtHZXQsICc8c3BhbiBjbGFzcz1uaWtHZXQ+JCY8L3NwYW4+JykucmVwbGFjZShyZWdOaWtTZW5kLCAnPHNwYW4gY2xhc3M9bmlrU2VuZD4kJjwvc3Bhbj4nKTsgICAgIFxyXG4gIH1cclxuXHJcblxyXG4gIG1haW4uc2hvd1NtaWxlcyA9IGZ1bmN0aW9uKHRleHQpe1xyXG4gIC8v0J/QvtC40YHQuiDQuCDQt9Cw0LzQtdC90LAg0YHQvNCw0LnQu9C+0LJcclxuICAgIHZhciBzbWlsaWVzID0ge1xyXG4gICAgICAnOiknOidzbWlsZScsXHJcbiAgICAgIFwiOicoXCI6J2NyeScsXHJcbiAgICAgICc6KCc6J3NhZCcsXHJcbiAgICAgICc7KSc6J3dpbmsnLFxyXG4gICAgICAnOionOidraXNzJyxcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIHRleHQucmVwbGFjZSgvKDpcXCkpfCg6XFwoKXwoOidcXCgpfCg7XFwpKXwoOlxcKikvZywgZnVuY3Rpb24gKG1hdGNoKSB7XHJcbiAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cInNtaWxpZXMgJytzbWlsaWVzW21hdGNoXSsnXCI+PC9kaXY+JztcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgbWFpbi5zYXZlVGV4dCA9IGZ1bmN0aW9uKHRleHQpe1xyXG4gIC8v0K3QutGA0LDQvdC40YDQvtCy0LDQvdC40LUg0YLQtdC60YHRgtCwINC+0YIg0LjQvdGK0LXQutGG0LjQuSwg0YPQsdC40YDQsNC10LwgPD4mXHJcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC8mL2csIFwiJmFtcDtcIikucmVwbGFjZSgvPC9nLCBcIiZsdDtcIikucmVwbGFjZSgvPi9nLCBcIiZndDtcIik7XHJcbiAgfVxyXG5cclxuXHJcbiAgbWFpbi5zaG93ID0gZnVuY3Rpb24oZGF0YSwgbmlrR2V0LCBtb2Qpe1xyXG4gIC8v0KTRg9C90LrRhtC40Y8g0L7RgtGA0LjRgdC+0LLQutC4INGB0L7QvtCx0YnQtdC90LjRj1xyXG4gICAgdmFyIGRpdiA9IGFuZ3VsYXIuZWxlbWVudChcIjxkaXY+XCIpO1xyXG4gICAgdmFyIHBhcmVudCA9IGFuZ3VsYXIuZWxlbWVudChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3RleHRcIikpO1xyXG5cclxuICAgIGlmIChtb2QgPT0gJ2dldCcpe1xyXG4gICAgLy/QktGL0LHQuNGA0LDQtdC8LCDQvtGC0LrRg9C00LAg0LLRi9C30LLQsNC90LAg0YTRg9C90LrRhtC40Y8gLSDQvdCw0YjQtSDRgdC+0L7QsdGJ0LXQvdC4INC40LvQuCDQvdC10YJcclxuICAgICAgXHJcbiAgICAgIGRpdi5hZGRDbGFzcyhcImFsZXJ0IGdldFwiKTtcclxuICAgICAgdmFyIHRleHQgPSBtYWluLmNoYW5nZU5payhkYXRhLm5paywgbmlrR2V0LCBkYXRhLnRleHQpO1xyXG4gICAgICAvL9CY0YnQtdC8INC90LjQutC4XHJcblxyXG4gICAgfWVsc2V7XHJcblxyXG4gICAgICBkaXYuYWRkQ2xhc3MoXCJhbGVydCBzZW5kXCIpO1xyXG4gICAgICB2YXIgdGV4dCA9IG1haW4uY2hhbmdlTmlrKG5pa0dldCwgZGF0YS5uaWssIGRhdGEudGV4dCk7XHJcbiAgICB9XHJcblxyXG4gICAgdGV4dCA9IG1haW4uc2hvd1NtaWxlcyh0ZXh0KTtcclxuICAgIC8v0JfQsNC80LXQvdGP0LXQvCDRgdC80LDQudC70YtcclxuICAgIFxyXG4gICAgdmFyIGNvbnRlbnQgPSBhbmd1bGFyLmVsZW1lbnQoJzxzcGFuIGNsYXNzPVwibmlrXCI+JytkYXRhLm5paysnOiA8L3NwYW4+JysgdGV4dCk7XHJcbiAgICAvL9Ck0L7RgNC80LjRgNGD0LXQvCDQvdC+0LLRi9C5INC00LjQsiDQuCDQtNC+0LHQsNCy0LvRj9C10Lwg0LXQs9C+INCyINC00LjQsNC70L7Qs9C+0LLQvtC1INC+0LrQvdC+XHJcbiAgICBkaXYuYXBwZW5kKGNvbnRlbnQpO1xyXG4gICAgcGFyZW50LmFwcGVuZChkaXYpO1xyXG5cclxuICB9XHJcblxyXG4gIG1haW4uc2VuZCA9IGZ1bmN0aW9uKGdldE5payl7XHJcbiAgLy/QntGC0L/RgNCw0LLQutCwINCy0LLQtdC00LXQvdC90L7Qs9C+INC/0LjRgdGM0LzQsCDQvdCwINC+0YHQvdC+0LLQvdGD0Y4g0YHRgtGA0LDQvdC40YbRg1xyXG4gICAgdmFyIHdpbiA9IHdpbmRvdy5wYXJlbnQ7XHJcbiAgXHJcbiAgICBpZiAobWFpbi5tZXNzYWdlICE9ICcnKXtcclxuICAgIC8v0J/RgNC+0LLQtdGA0LrQsCwg0YfRgtC+0LEg0L3QtSDQvtGC0L/RgNCw0LLQuNGC0Ywg0L/Rg9GB0YLQvtC1INGB0L7QvtCx0YnQtdC90LjQtVxyXG4gICAgICAgdmFyIHNlbmQgPSB7XHJcbiAgICAgICAgdHlwZTonbWVzc2FnZScsXHJcbiAgICAgICAgbmlrOm1haW4uc2F2ZVRleHQobWFpbi5uaWNrbmFtZSksXHJcbiAgICAgICAgdGV4dDptYWluLnNhdmVUZXh0KG1haW4ubWVzc2FnZSlcclxuICAgICAgfTtcclxuXHJcbiAgICAgIG1haW4uc2hvdyhzZW5kLCBnZXROaWssICdzZW5kJyk7ICAgICAgIFxyXG4gICBcclxuICAgICAgd2luLnBvc3RNZXNzYWdlKHNlbmQsIFwiaHR0cDovL2xvY2FsaG9zdDo5MDAwXCIpO1xyXG5cclxuICAgICAgLy/Qn9GA0LjQstC+0LTQuNC8INC00LjQsNC70L7Qs9C+0LLQvtC1INC+0LrQvdC+INCyINC90LDRh9Cw0LvRjNC90L7QtSDRgdC+0YHRgtC+0Y/QvdC40LUgXHJcbiAgICAgIG1haW4ubWVzc2FnZSA9ICcnO1xyXG4gICAgICBtYWluLmFjdGl2ZUJ1dHRvbiA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxufSJdfQ==
